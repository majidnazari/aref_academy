 enum LessonEnum{
   Mathematics @enum(value: 0)
   Physics @enum(value:1)
   Biology @enum(value: 2)
  
 }
input OrderByClause{
    field: String!
    order: SortOrder!
}

enum SortOrder {
    ASC
    DESC
}



  
  input CreateAzmoonInput{
          user_id:Int!
          course_id:Int!
          course_session_id:Int!
          isSMSsend:Int!
          score:Float!
   }
   input CreateUserInput @validator{
     # type: String!
     # mobile: String!  @rules(apply:["size:11","unique:users,mobile"])
     # email: String! @rules(apply: ["email","unique:users,email"])
      email: String! @rules(apply: ["size:11","unique:users,email"])
      password: String! @hash @rules(apply: ["min:6"])
      first_name: String!
      last_name: String!
      group_id:Int!
      branch_id:Int!
       
      # branche_id:Int!
      # group_user:createGroupUserInput! @create
     # is_teacher: Int!  
    }
   input UpdateUserInput @validator{
      id:ID!
     # type: String
     # mobile: String 
      email:String  
     # password: String!      
      first_name: String
      last_name: String
      group_id:Int 
      branch_id:Int 
      # ): User! @update
   }
    # input createGroupUserInput {
    #   user_id_creator:Int!
    #   user_id:Int!
    #   group_id:Int!
    #   # created_at:DateTime
    #   # updated_at:datetime
    # }

    input CreateTeacherInput{
      first_name: String!
      last_name: String!
      mobile: String! @rules(apply: ["size:11","unique:teachers,mobile"])
      address:String!
    }
    input UpdateTeacherInput{
      id:ID!
      first_name: String
      last_name: String
      mobile: String @rules(apply: ["size:11","unique:teachers,mobile"])
      address:String
    }

    input CreateYearInput{
      name: String!
      active: Boolean!      
    }
    input UpdateYearInput{
      id:ID!
      name: String
      active: Boolean   
    }
    
    # input CreateStudentInput{
    #   # first_name: String!
    #   # last_name: String!
    #   # mobile: String! @rules(apply: ["size:11","unique:teachers,mobile"])
    #   # address:String!

       
    #     phone:String! # @rules(apply: ["size:11","unique:students,phone"]),
    #     first_name:String!
    #     last_name:String!
    #     level:String
    #     egucation_level:String!
    #     parents_job_title:String
    #     home_phone:String
    #     father_phone:String
    #     mother_phone:String
    #     # school:String
    #     # average:Float
    #     major:String
    #     # description:String
    #     nationality_code:String!
    #     # introducing:String
    #     # student_phone:String
    #     # cities_id:Int
    #     # sources_id:Int
    #     # supporters_id:Int
    #     # archived:Int
    # }
    #  input UpdateStudentInput{
    #     id:ID!
    #     phone:String! # @rules(apply: ["size:11","unique:students,phone"]),
    #     first_name:String! 
    #     last_name:String! 
    #     level:String
    #     egucation_level:String! 
    #     parents_job_title:String
    #     home_phone:String
    #     father_phone:String 
    #     mother_phone:String       
    #     major:String 
    #     # description:String 
    #     nationality_code:String!
    #     # phone:String,# @rules(apply: ["size:11","unique:students,phone"]),
    #     # first_name:String,
    #     # last_name:String,
    #     # level:Int,
    #     # egucation_level:String,
    #     # parents_job_title:String,
    #     # home_phone:String,
    #     # father_phone:String,
    #     # mother_phone:String,
    #     # school:String,
    #     # average:Float,
    #     # major:String!,
    #     # introducing:String,
    #     # student_phone:String,
    #     # cities_id:Int,
    #     # sources_id:Int,
    #     # supporters_id:Int,
    #     # archived:Int
    # }


    input CreateCourseInput{       
      branch_id:Int!
      year_id:Int!
      teacher_id:Int!
      name:String!
      gender:String!
      lesson_id:Int!
      education_level:String!
      type:String!
      financial_status:String
      user_id_financial:Int
            
    }
    # input CreateCourseWithDateInput{       
      
    #   year_id:Int!
    #   teacher_id:Int!
    #   name:String!
    #   lesson:String!
    #   education_level:String!
    #   type:String!
    #   financial_status:String
    #   user_id_financial:Int
            
    # }
    
     input UpdateCourseInput{       
      id:ID!
      branch_id:Int
      year_id:Int
      teacher_id:Int
      name:String
      gender:String
      lesson_id:Int
      education_level:String      
      type:String
      financial_status:String
      user_id_financial:Int
      
    }
    input CreateCourseSessionInput @validator{       
      
        course_id:Int!
        branch_class_room_id:Int!
        name:String
        price:Int
        special:Boolean
        start_date:String!
        start_time:String!
        end_time:String!
       
            
    }
      input CreateCourseSessionByDuringDateInput @Validator{       
      
        course_id:Int!
        branch_class_room_id:Int!
        days:[String]
        name:String
        price:Int
        special:Boolean
        start_date:String!
        end_date:String!
        start_time:String!
        end_time:String!      
            
    }
    input UpdateCourseSessionInput{       
        id:ID!
        course_id:Int,
        branch_class_room_id:Int,
        name:String,
        price:Int
        special:Boolean
        start_date:Date,
        start_time:String,
        end_time:String,
        isCancel:Boolean
            
    }

    input CreateCourseStudentInput @validator{ 
        
        course_id:Int!
        # course_session_id:Int!
        student_id:Int!
        manager_status:String
        financial_status:String
        student_status:String
        user_id_manager:Int
        user_id_financial:Int
        user_id_student_status:Int
        description:String
        
    }
    input UpdateCourseStudentInput @validator{       
        id:ID!
        course_id:Int
        # course_session_id:Int
        student_id:Int
        manager_status:String
        financial_status:String
        student_status:String
        financial_refused_status:String
        transferred_to_course_id:Int
        user_id_manager:Int
        user_id_financial:Int
        user_id_student_status:Int
        description:String
            
    }


    input CreateAbsencePresenceInput {       
       
        course_session_id:Int
        student_id:Int
        teacher_id:Int
        status:String
        attendance_status:String    
            
    }
   input  CreateStudentToListBeforeAbsencePresenceInput @validator{
        course_session_id:Int
        course_id:Int               
   }
    input UpdateAbsencePresenceInput{

        id:ID!        
        course_session_id:Int
        student_id:Int
        teacher_id:Int
        status:String
        attendance_status:String
       
    }
    input UpdateAbsencePresenceInputWithStudentIdCourseSessionId{
       course_session_id:Int!
       student_id:Int!
       status:String= "present"
    }

    input CreateAzmoonInput{ 
          course_id:Int
          course_session_id:Int
          isSMSsend:Int
          score:Float
    }
    input UpdateAzmoonInput{
          id:ID!          
          course_id:Int
          course_session_id:Int
          isSMSsend:Int
          score:Float
    }

    input CreateAzmoonResultInput{ 
         
          student_id:Int,
          result_score:String, 
    }
    input UpdateAzmoonResultInput{
        id:Int
        student_id:Int,
        result_score:String, 
    }

    input CreateFaultInput{         
          description:String!         
    }
    input UpdateFaultInput{
        id:Int
        description:String
    }    

    input CreateBranchInput{         
          name:String!         
    }
    input UpdateBranchInput{
        id:Int
        name:String
    }
    input CreateBranchClassRoomInput{ 
          branch_id:Int
          description:String        
          name:String         
    }
    input UpdateBranchClassRoomInput{
        id:Int
        branch_id:Int
        description:String        
        name:String
    }

     input CreateLessonInput{ 
              
          name:String         
    }
    input UpdateLessonInput{
        id:Int
           
        name:String
    }

   input  CreateCourseStudentRapidlyInput @validator{
      
       course_id:Int!
       course_session_id:Int!
       student_id:Int!
    }
    input CreateStudentWarningInput  @validator{

      comment:String!
      student_id:Int!
      course_id:Int
      
    }
    input UpdateStudentWarningHistoryInput  @validator{ 

      student_id:Int!
      course_id:Int
      response:String!
    }

    input CreateStudentContactInput{
      user_id_creator:Int!
      reason_absence:String
      absence_presence_id:Int!
      who_answered:String
      is_called_successfull:Boolean
      description:String

    }

     input UpdateStudentContactInput{   
      reason_absence:String
      absence_presence_id:Int!
      who_answered:String
      is_called_successfull:Boolean
      description:String

    }

     


type User {
    id:ID    
    # userId:ID
    group_id:Int
    branch_id:Int
    first_name: String
    last_name: String 
    #mobile: String!
    email: String! 
    #type: String!
    #is_teacher: Int! 
   
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
    group: Group @belongsTo
    branch: Branch @belongsTo
    # user_creator: User @belongsTo
    # faults:[Fault] @belongsToMany
    faults: [Fault] @hasMany
   
}
type StudentContact @key(fields: "id") {
  id:ID!
  user_id_creator:Int
  student_id:Int
  # student:Student @provides(fields: "id")
  absence_presence_id:Int
  who_answered:String
  description:String
  is_called_successfull:Boolean
  created_at:DateTime
  updated_at:DateTime
  deleted_at:DateTime
}

type StudentFault @key(fields: "id") {
  id:ID!
  user_id_creator:Int
  student_id:Int
  # student:Student @provides(fields: "id")
  fault_id:Int  
  created_at:DateTime
  updated_at:DateTime
  deleted_at:DateTime
}

type Branch{
    id:ID
    user_id_creator:Int
    name:String
    created_at:DateTime
    updated_at:DateTime
    deleted_at:DateTime
    # User:[User] @belongsTo
    user: User @belongsTo
   
   
}
type BranchClassRoom{
    id:ID
    user_id_creator:Int
    branch_id:Int
    name:String
    description:String
    created_at:DateTime
    updated_at:DateTime
    deleted_at:DateTime
    # User:[User] @belongsTo
    user: User @belongsTo
    branch:Branch @belongsTo
   
}
type Fault{
    id:ID
    user_id_creator:Int
    description:String
    created_at:DateTime
    updated_at:DateTime
    deleted_at:DateTime
    # User:[User] @belongsTo
    user: User @belongsTo
   
}
type AzmoonResult @key(fields: "id") {
    id:ID!
    student_id:Int
    result_score:String 
    created_at:DateTime
    updated_at:DateTime
    deleted_at:DateTime
    # student:Student @provides(fields: "id") 
}

type Azmoon{
    id:ID
    user_id_creator:Int
    course_id:Int
    course_session_id:Int
    isSMSsend:Int
    score:Float
    created_at:DateTime
    updated_at:DateTime
    deleted_at:DateTime
    user:User @belongsTo
    course:Course @belongsTo
    courseSession:CourseSession @belongsTo
    
}
type Lesson{
  id:Int
  name:String
}

type AbsencePresence @key(fields: "id") {
    id:ID!
    user_id_creator:Int
    course_session_id:Int
    teacher_id:Int
    student_id:Int
    # student:Student @provides(fields: "id")
    status:String
    attendance_status:String
    created_at:DateTime
    updated_at:DateTime
    deleted_at:DateTime
    user:User @belongsTo
    courseSession:CourseSession @belongsTo
    teacher:User @belongsTo
}
type CourseStudentWithIllegalStudent @key(fields: "id"){
  
   id:ID!
  student_id:Int
  financial_status:String
  session_count: Int
  name: String
  course_id: String
  paginatorInfo:paginatorInfo

  #  data:[Data]
  #  paginatorInfo:paginatorInfo

}
#   data:[Data]
#   paginatorInfo:paginatorInfo
# }
type Data {

  id:Int
  student_id:Int
  financial_status:String
  session_count: Int
  name: String
  course_id: String
}
type paginatorInfo{
      count:Int
      currentPage:Int
      firstItem:Int
      hasMorePages:Boolean
      lastItem:Int
      lastPage:Int
      perPage:Int
      total:Int
}
type CourseStudentWithAbsencePresence @key(fields: "id"){   
      id:ID!       
      course_id:Int 
     
      ap_id:Int  
      ap_status:String 
      ap_attendance_status:String
      ap_user_id_creator:Int
      ap_course_session_id:Int
      ap_teacher_id:Int
      ap_student_id:Int
      ap_created_at:DateTime

      cs_user_id_creator:Int
      student_id:Int
      cs_course_id:Int
      cs_manager_status:String
      cs_financial_status:String
      cs_student_status:String
      cs_user_id_manager:Int
      cs_user_id_financial:Int
      cs_user_id_student_status:Int
      cs_created_at:DateTime

      student_warning_id:Int
      student_warning_student_id:Int
      student_warning_course_id:Int
      student_warning_comment:String

      # user_creator:User @belongsTo
      # user_manager:User @belongsTo
      # user_financial:User @belongsTo
      # user_student_status:User @belongsTo
      
}
type CourseStudentWithAbsencePresenceList @key(fields: "id"){   
      id:ID!       
      course_id:Int 
     
      ap_id:Int  
      ap_status:String 
      ap_attendance_status:String
      ap_user_id_creator:Int
      ap_course_session_id:Int
      ap_teacher_id:Int
      ap_student_id:Int
      ap_created_at:DateTime

      cs_user_id_creator:Int
      student_id:Int
      cs_course_id:Int
      cs_manager_status:String
      cs_financial_status:String
      cs_student_status:String
      cs_user_id_manager:Int
      cs_user_id_financial:Int
      cs_user_id_student_status:Int
      cs_created_at:DateTime

}
type AbsencePresenceBrief {   
     
      session_id:Int
      status:String
      start_date:String
      start_time:String
      end_time:String
}  
type AbsencePresenceList @key(fields: "id") {   
      id:ID!
      student_id:Int
      student_status:String
      sessions:[AbsencePresenceBrief]

}
type CourseWithDetailsReport{

      id:Int      
      teacher_name:String
      start_session:String
      end_session:String
      total_session:Int
      total_done_session:Int
      avg_absent:Float
      avg_dellay:Float
      total_students:Int
      total_approved:Int
      total_noMoney:Int
      total_noMoney_semi_pending:Int
      total_pending:Int
      total_refused:Int
      total_fired:Int

      total_just_noMoney:Int
      total_just_not_returned:Int
      total_just_returned:Int
      total_transferred:Int
      
      # user_id_creator:Int
      # branch_id:Int
      # year_id:Int
      # teacher_id:Int
      # teacher:Teacher
      # name:String
      # gender:String
      # lesson_id:Int
      # type:String
      # education_level:String
      # financial_status:String
      # user_id_financial:Int

      #  sum_not_registered_session:Int
      #  sum_noAction_session: Int
      #  sum_dellay60_session:Int
      #  sum_dellay45_session:Int
      #  sum_dellay30_session:Int
      #  sum_dellay15_session:Int
      #  sum_present_session:Int
      #  sum_total_present:Int 
      #  sum_absent_session:Int
      #  total_remain_session:Int
      #  total_done_session:Int
      #  total_session:Int

      #  courseSession:[CourseSession]

      #  courseStudent:[CourseStudent]
      
}


type CourseStudent @key(fields: "id"){   
        id:ID!
        course_id:Int
        # course_session_id:Int
        # absence_presence:AbsencePresence @field(resolver: "App\\GraphQL\\Queries\\AbsencePresence\\GetAbsencePresence@resolveGetAbsencePresence")
        student_id:Int
       
        user_id_creator:Int
        user_id_manager:Int  
        user_id_financial:Int  
        user_id_student_status:Int  
        manager_status:String
        financial_status:String
        student_status:String  
        description:String 
        total_not_registered:Int
        total_noAction:Int
        total_dellay60:Int
        total_dellay45:Int
        total_dellay30:Int
        total_dellay15:Int
        total_present:Int
        total_absent:Int
        sum_total_present:Int  #@field(resolver: "App\\GraphQL\\Queries\\AbsencePresence\\GetAbsencePresence@resolveGetAbsencePresence")

        financial_refused_status:String
        transferred_to_course_id:Int
        transferred_course:Course @belongsTo
        financial_status_updated_at:DateTime
        created_at:DateTime
        updated_at:DateTime
        deleted_at:DateTime

        user_creator:User @belongsTo
        user_manager:User @belongsTo
        user_financial:User @belongsTo
        user_student_status:User @belongsTo
        course:Course @belongsTo

}
type CourseSession{   
        id:ID
        user_id_creator:Int
        branch_class_room_id:Int
        course_id:Int
        name:String
        price:Int
        special:Boolean
        start_date:Date
        start_time:String
        end_time:String
        user:User @belongsTo
        course: Course @belongsTo
        classRoom:BranchClassRoom @belongsTo
        absencePresences:[AbsencePresence] @hasMany
}

type Course{
      id:ID
      user_id_creator:Int
      branch_id:Int
      year_id:Int
      teacher_id:Int
      name:String
      gender:String
      lesson_id:Int
      type:String
      education_level:String
      financial_status:String
      user_id_financial:Int

       sum_not_registered_session:Int
       sum_noAction_session: Int
       sum_dellay60_session:Int
       sum_dellay45_session:Int
       sum_dellay30_session:Int
       sum_dellay15_session:Int
       sum_present_session:Int
       sum_total_present:Int 
       sum_absent_session:Int
       total_remain_session:Int
       total_done_session:Int
       total_session:Int

      created_at:DateTime
      updated_at:DateTime
      deleted_at:DateTime
      user:User @belongsTo
      year:Year @belongsTo
      teacher:User @belongsTo
      lesson:Lesson @belongsTo
      branch:Branch @belongsTo
      courseSession:[CourseSession] @hasMany

}

# type Student @key(fields: "id") @extends  {
#   id:ID! @external 
#   courses: [CourseStudent]      
# }

 

type Group{ 
  id:ID
  # groupId:ID
  user_id_creator:Int
  # key:String
  name:String
  persian_name:String
  type:String
  created_at: DateTime
  updated_at: DateTime
  deleted_at: DateTime
  users: [User] @hasMany
  # pivot: GroupUserPivot

  menus: [Menu!] @belongsTo
}
# type GroupUserPivot { 
#     id:ID   
#     # groupUserId: ID
#     user_id_creator:Int
#     user_id: Int
#     group_id: Int
#     key: String
#     created_at: DateTime
#     updated_at: DateTime
#     deleted_at: DateTime

#     user: [User!] @hasMany
#     group: [Group!] @hasMany
# }

type Menu {
    id:ID
    # menuId: Int
    slug: String
    name: String
    icon: String
    href: String
    #type: String!
    parent_id:Int
    parent_id: Int    
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
    # parent:[Menu]  @hasMany
    subMenus: [Menu] @field(resolver: "App\\GraphQL\\Resolvers\\SubMenuResolvers@subMenuResolver")
    # @hasMany  @field(resolver: "App\\GraphQL\\Resolvers\\SubMenuResolvers@subMenuResolver") 
    # subMenus: [Menu] @hasMany
    groups: [Group!] @belongsToMany
    #  pivot: MenuPivot
}

type MenuPivot {
    id:ID
    # groupMenuId: Int
    user_id_creator:Int
    menu_id: Int
    group_id: Int  
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime

    menu: [Menu!] @hasMany
    group: [Group!] @hasMany
}


type Teacher {
  id:ID!
  user_id_creator:Int
  first_name:String
  last_name:String
  mobile:String
  address:String
  created_at:DateTime
  updated_at:DateTime
  deleted_at:DateTime
}

type Year {
  id:ID!
  user_id_creator:Int  
  name:String
  active:Boolean  
  created_at:DateTime
  updated_at:DateTime
  deleted_at:DateTime
  user: User! @belongsTo
}

type StudentWarning @key(fields: "id"){
  id:ID!
  user_id_creator:Int
  user_id_updator:Int
  student_id:Int
  course_id:Int
  comment:String
  student_warning_history_id:Int
  created_at:DateTime
  updated_at:DateTime
  user_creator: User! @belongsTo
  # update_creator: User! @belongsTo
}
type StudentWarningHistory @key(fields: "id"){
 
  id:ID!
  user_id_creator:Int
  user_id_updater:Int
  student_id:Int
  course_id:Int
  comment:String  
  response:String 
  created_at:DateTime
  updated_at:DateTime
  user_creator: User @belongsTo
  user_updater: User @belongsTo
  course: Course @belongsTo
}

type CourseReportAtSpecialTime @key(fields: "id"){
      id:ID!
      user_id_creator:Int
      branch_id:Int
      gender:String
      year_id:Int
      teacher_id:Int
      name:String
      lesson_id:Int
      education_level:String
      type:String
      financial_status:String
      student_id:Int

      branch:Branch @belongsTo
      teacher:User @belongsTo
      lesson:Lesson @belongsTo
      courseSession:[CourseSession]  # @hasMany
      courseStudent:[CourseStudent]

}